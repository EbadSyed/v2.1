name=Connection Manager: In Band Joining
description=This plugin will handle the network state machine for a router or end device to function on a network with in band commissioning.

category=Common
quality=development

requiredApis=debug-print,event,stack
providedApis=connection-manager, connection-manager-jib
api.connection-manager.header=../connection-manager.h
api.connection-manager-jib.header=connection-manager-jib.h

connection-manager-jib.c

implementedCallbacks=emberAttachToNetworkReturn,emberJoinNetworkReturn,emberResumeNetworkReturn,emberResetNetworkStateReturn
callbacks=callback.info

options=radioTxPower,role,numRejoinAttempts,orphanRejoinDelayMinutes

radioTxPower.name=Radio output power
radioTxPower.description=The radio output power (in dBm) at which the node will operate.
radioTxPower.type=POWER
radioTxPower.default=3

role.name=Device role
role.description=The role of the device on the network: router, end device, or sleepy end device
role.type=LIST:Router,End Device,Sleepy End Device
role.default=Router

numRejoinAttempts.name=Number of join attempts
numRejoinAttempts.description=For an end device, the number of times to try joining before giving up.  Set to 0 to retry indefinitely.
numRejoinAttempts.type=NUMBER:1,40
numRejoinAttempts.default=3

orphanRejoinDelayMinutes.name=Orphan reattach delay
orphanRejoinDelayMinutes.description=The amount of time (in minutes) to wait between reattach attempts when a device loses its parent
orphanRejoinDelayMinutes.type=NUMBER:0,0xFFFF
orphanRejoinDelayMinutes.default=15

setup(bookkeeping) {
  networkStatus=emConnectionManagerJibNetworkStatusHandler
}

setup(eventConfiguration) {
  emConnectionManagerNetworkStateEventControl, emConnectionManagerNetworkStateEventHandler
  emConnectionManagerOrphanEventControl, emConnectionManagerOrphanEventHandler
  emConnectionManagerOkToLongPollEventControl, emConnectionManagerOkToLongPollHandler
}
